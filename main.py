import numpy as np
from sympy import Symbol
from sympy.utilities.lambdify import lambdify
import matplotlib.pyplot as plt
import middlepoint
import simpson

def main():
    try:
        #Expression sous forme de string
        strExp = input("Entrez la fonction que vous voulez intégrer: ")

        #Sortie du prompt
        if(strExp.lower() == "exit"):
            return
            
        #Expression "pythonifiée"
        funcExp = lambdify(Symbol("x"), strExp)

        #Bornes
        a = int(input("Entrez la borne a: "))
        b = int(input("Entrez la borne b: "))

        if(a>b): 
            print("a étant plus grand que b, les deux valeurs ont été échangées.")
            a, b = b, a

        # fig = plt.figure(figsize= (10, 10))
        # x = np.linspace(a, b, 100)
        # plt.plot(x, funcExp(x))
        # plt.show()

        middlepoint.middlepoint(a, b, funcExp)
        simpson.simpson(funcExp,0,1,1)
        #appel du code principal ici
    except KeyboardInterrupt:
        print("\nInterruption, sortie du programme...")
        return
    except ValueError as err:
        print("Erreur de valeur")
        print(err)
    except: 
        #gestion des erreurs ici
        pass
    main()

if __name__ == "__main__":
    main()
    exit(code=0)
